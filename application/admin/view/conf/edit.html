<!DOCTYPE html>
<html><head>
        <meta charset="utf-8">
        <title>ThinkPHP5.0</title>

        <meta name="description" content="Dashboard">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!--Basic Styles-->
        <link href="__CSS__/bootstrap.css" rel="stylesheet">
        <link href="__CSS__/font-awesome.css" rel="stylesheet">
        <link href="__CSS__/weather-icons.css" rel="stylesheet">

        <!--Beyond styles-->
        <link id="beyond-link" href="__CSS__/beyond.css" rel="stylesheet" type="text/css">
        <link href="__CSS__/demo.css" rel="stylesheet">
        <link href="__CSS__/typicons.css" rel="stylesheet">
        <link href="__CSS__/animate.css" rel="stylesheet">
        <link href="__CSS__/admin.css" rel="stylesheet">

    </head>
    <body>
        <!-- 头部 -->
        {include file="common/header"}

        <!-- /头部 -->

        <div class="main-container container-fluid">
            <div class="page-container">
                <!-- Page Sidebar -->
                {include file="common/left"}
                <!-- /Page Sidebar -->
                <!-- Page Content -->
                <div class="page-content">
                    <!-- Page Breadcrumb -->
                    <div class="page-breadcrumbs">
                        <ul class="breadcrumb">
                            <li>
                                <a href="#">{$Think.lang.system}</a>
                            </li>
                            
                            <li class="active">{$Think.lang.configs_add}</li>
                        </ul>
                    </div>
                    <!-- /Page Breadcrumb -->

                    <!-- Page Body -->
                    <div class="page-body">

                        <div class="row">
                            <div class="col-lg-12 col-sm-12 col-xs-12">
                                <div class="widget">
                                    <div class="widget-header bordered-bottom bordered-blue">
                                        <span class="widget-caption">{$Think.lang.configs_add}</span>
                                    </div>
                                    <form class="form-horizontal" role="form" action="" method="post">
                                        <div class="widget-body">
                                            <div id="horizontal-form">

                                                <div class="form-group">
                                                    <label for="ch_name" class="col-sm-2 control-label no-padding-right">{$Think.lang.ch_name}</label>
                                                    <div class="col-sm-6">
                                                        <input class="form-control" id="ch_name" placeholder="" name="ch_name" value="{$result.ch_name}" type="text">
                                                    </div>
                                                    <p class="help-block col-sm-4 red">* {$Think.lang.required}</p>
                                                </div>
                                                <div class="form-group">
                                                    <label for="en_name" class="col-sm-2 control-label no-padding-right">{$Think.lang.en_name}</label>
                                                    <div class="col-sm-6">
                                                        <input class="form-control" id="en_name" placeholder="" name="en_name" required="" value="{$result.en_name}" type="text">
                                                    </div>
                                                    <p class="help-block col-sm-4 red">* {$Think.lang.required}</p>
                                                </div>
                                                <div class="form-group">
                                                    <label for="value" class="col-sm-2 control-label no-padding-right">{$Think.lang.value}</label>
                                                    <div class="col-sm-6">
                                                        <textarea class="form-control" id="value" placeholder="" value="" name="df_value" onblur="check_template($('#value'))" >{$result.df_value}</textarea>
                                                    </div>
                                                    <p class="help-block col-sm-4 red" id="value_tip"></p>
                                                </div>
                                                <div class="form-group" id="values_form">
                                                    <label for="values" class="col-sm-2 control-label no-padding-right">{$Think.lang.values}</label>
                                                    <div class="col-sm-6">
                                                        <input class="form-control" id="values"  placeholder="" name="values"  value="{$result.values}" type="text">
                                                    </div>
                                                    <p class="help-block col-sm-4 black">{$Think.lang.values_tip}</p>
                                                </div>
                                                <div class="form-group">
                                                    <label for="c_type" class="col-sm-2 control-label no-padding-right">{$Think.lang.cate}</label>
                                                    <div class="col-sm-6">
                                                        <select name="c_type" style="width: 100%;">
                                                            {volist name='c_type' id="data"}                                                               
                                                            <option value="{$key}" {if condition="$result.c_type eq $key"} selected="selected" {/if}>{$data}</option>
                                                            {/volist}
                                                        </select>
                                                    </div>
                                                    <p class="help-block col-sm-4 red">* {$Think.lang.required}</p>
                                                </div>
                                                <div class="form-group">
                                                    <label for="d_type" class="col-sm-2 control-label no-padding-right">{$Think.lang.data_type}</label>
                                                    <div class="col-sm-6">
                                                        <select name="d_type" id="d_type" style="width: 100%;" onchange="check_value(this)">
                                                            {volist name='data_type' id="data"}                                                               
                                                            <option value="{$key}" {if condition="$result.d_type eq $key"} selected="selected"{/if}>{$data}</option>
                                                            {/volist}              
                                                            
                                                        </select>
                                                    </div>
                                                    <p class="help-block col-sm-4 red">* {$Think.lang.required}</p>
                                                </div>

                                                 <div class="form-group">
                                                    <label for="status" class="col-sm-2 control-label no-padding-right" >{$Think.lang.conf_status}</label>
                                                    <div class="col-sm-6">
                                                        <label>
                                                            <input class="checkbox-slider colored-success "  id='status' {if condition="$result.status eq 1"} checked="checked" {/if} name='status' type="checkbox">
                                                            <span class="text" style="margin-top:5px"></span>
                                                        </label>
                                                    </div>                             
                                                </div>


                                            </div>
                                            <div class="form-group">
                                            <div class="col-sm-offset-2 col-sm-10">
                                                <button type="submit"  onclick="javascript:check_template($('#value'));if(!template_name_is_right){$('#value').focus() ;return false;}" class="btn btn-sky">{$Think.lang.save_info}</button>
                                            </div>
                                        </div>
                                        </div>
                                        
                                    </form>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- /Page Body -->
                </div>
                <!-- /Page Content -->
            </div>	
        </div>

        <!--Basic Scripts-->
        <script src="__JS__/jquery_002.js"></script>
        <script src="__JS__/bootstrap.js"></script>
        <script src="__JS__/jquery.js"></script>
        <!--Beyond Scripts-->
        <script src="__JS__/beyond.js"></script>
        <script type="text/javascript">
           
            (function(){
                var d_type="{$result.d_type}";
                if(d_type!=2&&d_type!=3&&d_type!=5){$('#values_form').hide();}
                if($('#en_name').val()=='template'){
                    $('#values_form').show();
                    get_template();
                    check_template($('#value'));
                }
                
                
            })();
           
            var template_name_is_right=true;     
            function check_value(obj){
               if(obj.value==2||obj.value==3||obj.value==5){
                   $('#values_form').show();
                }else{
                      $('#values_form').hide();
                } ;
            }
              function get_template(){
                $('#values_form').show();
                $.ajax({
                   type: "POST",
                   url: "{:url('getTemplate')}",
                   data: "",
                   success: function(msg){
                     $("#values").val(msg);
                     $("#values").attr('readonly','readonly');
                  
                   },
                   error:function(){
                       console.log('error');
                   },
                });
            }
          function check_template(obj){
               if($('#en_name').val()=='template'){
               $templ=obj.val();
              
               $templ_arr=$('#values').val().split(',');
             index=$.inArray($templ,$templ_arr);
              if(index==-1){
                  $("#value_tip").attr('style','color:red');                  
                  $("#value_tip").html("{$Think.lang.template_tip}");
                  $("#value").focus();
                  template_name_is_right=false;
               }else{
                    $("#value_tip").html(""); 
                    template_name_is_right=true;
               }
           }
            }
           
        </script>



    </body></html>